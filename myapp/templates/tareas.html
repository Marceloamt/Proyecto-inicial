{% extends "base.html" %}

{% block title %}Tareas | HomeBalance{% endblock %}

{% block content %}
    <h2>ğŸ§¹ Lista de Tareas del Hogar</h2>
    <p>AquÃ­ podrÃ¡s ver y asignar las tareas segÃºn disponibilidad.</p>

    <!-- Formulario para agregar una nueva tarea -->
    <form method="POST">
        {% csrf_token %}
        <input type="text" name="nombre" placeholder="Nombre de la tarea" required>
        <input type="text" name="responsable" placeholder="Responsable" required>
        <button type="submit">â• Agregar tarea</button>
    </form>

    <hr>

    <!-- Lista de tareas reales desde la base de datos -->
    <ul>
        {% for tarea in tareas %}
            <section>
                {% if tarea.estado == "hecha" %}
                    âœ… <span style="color: gray; text-decoration: line-through;">
                        {{ tarea.nombre }} â€” {{ tarea.responsable }}
                    </span>
                    (<em>{{ tarea.estado }}</em>)
                    <form action="{% url 'completar_tarea' tarea.id %}" method="POST" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit">â†©ï¸ Marcar como pendiente</button>
                </form>
            {% else %}
                ğŸ•“ <span style="color: red;">
                    {{ tarea.nombre }} â€” {{ tarea.responsable }}
                </span>
                (<em>{{ tarea.estado }}</em>)
                <form action="{% url 'completar_tarea' tarea.id %}" method="POST" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit">
                        {% if tarea.estado == "pendiente" %}
                            âœ… Marcar como hecha
                        {% else %}
                            â†©ï¸ Marcar como pendiente
                        {% endif %}
                    </button>
                </form>
            {% endif %}
            </section>
    {% empty %}
        <li>No hay tareas registradas aÃºn ğŸ’¤</li>
    {% endfor %}
</ul>
{% endblock %}